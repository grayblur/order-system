# 前端开发文档

# 花馍订单管理系统 - 前端产品需求文档

## 一、项目概述

### 1.1 项目背景

本系统用于花馍商品的订单管理,支持结婚、订婚、生日等多种场景的花馍订购。系统需要记录客户信息、商品详情、订单状态等,并支持按日期打印生产清单。

### 1.2 技术栈

- **前端框架**: Vue 3 + Vite
- **UI组件库**: Element Plus (推荐) 或 Ant Design Vue
- **样式**: CSS3 / SCSS
- **后端**: Node.js + Express
- **数据库**: SQLite
- **部署**: Docker

---

## 二、功能模块设计

### 2.1 订单录入页面 (主页面)

### 2.1.1 页面布局

采用左右分栏布局:

- **左侧区域 (60%)**: 客户信息 + 商品选择
- **右侧区域 (40%)**: 订单汇总 + 操作按钮

### 2.1.2 客户信息区块

```
┌─ 客户信息 ────────────────────┐
│ 姓名/地址: [_______________]  │
│ 联系电话: [_______________]   │
│ 预定日期: [📅 日期选择器]     │
│ 备注信息: [_______________]   │
│           [_______________]   │
└────────────────────────────────┘

```

**字段说明:**

- **姓名/地址**: 单个输入框,客户可填写姓名或地址 (二选一即可)
- **联系电话**: 必填项,格式验证 (11位手机号)
- **预定日期**: 日期选择器,默认当天
- **备注信息**: 多行文本框 (3-5行),非必填

### 2.1.3 商品选择区块

**树形结构展示:**

```
花馍 [可折叠]
├─ 结婚 [可折叠]
│  ├─ 上头糕 [可折叠]
│  │  ├─ ☐ 百年好合 (¥398)  [数量: - 0 +]
│  │  ├─ ☐ 喜结良缘 (¥398)  [数量: - 0 +]
│  │  ├─ ☐ 龙凤喜糕 (¥280)  [数量: - 0 +]
│  │  └─ ☐ 龙凤糕 (¥180)    [数量: - 0 +]
│  ├─ 剃头糕 [可折叠]
│  │  ├─ ☐ 花开富贵 (¥200)  [数量: - 0 +]
│  │  └─ ...
│  └─ ...
├─ 订婚 [可折叠]
│  └─ ...
└─ 生日 [可折叠]
   └─ ...

```

**交互说明:**

- 多级树形结构,支持展开/折叠
- 每个商品前有复选框
- 勾选后显示数量调节器 (- 按钮 / 数字 / + 按钮)
- 价格实时显示在商品名称后
- 支持快速搜索商品功能

### 2.1.4 订单汇总区块 (右侧固定)

```
┌─ 订单汇总 ────────────────┐
│ 已选商品:                 │
│ ┌────────────────────┐   │
│ │ 1. 百年好合 x2     │   │
│ │    ¥398 x 2 = ¥796│   │
│ │ 2. 花开富贵 x1     │   │
│ │    ¥200 x 1 = ¥200│   │
│ │ [删除] [修改数量]  │   │
│ └────────────────────┘   │
│                           │
│ ─────────────────────────│
│ 商品总计: ¥996            │
│                           │
│ ☐ 已结清账目              │
│                           │
│ [🖨 打印清单] [✓ 提交订单]│
└───────────────────────────┘

```

**功能说明:**

- 实时展示已选商品明细
- 显示单价、数量、小计
- 支持单项删除和数量修改
- 自动计算总价
- 结清账目勾选框
- 操作按钮区域

---

### 2.2 打印功能

### 2.2.1 打印对话框

点击"打印清单"按钮弹出对话框:

```
┌─ 打印生产清单 ─────────────┐
│ 选择日期: [📅 YYYY-MM-DD] │
│           (默认当天)       │
│                            │
│ [预览清单] [确认打印] [取消]│
└────────────────────────────┘

```

### 2.2.2 打印内容格式

**生产清单样式:**

```
═══════════════════════════════
     花馍生产清单
═══════════════════════════════
日期: 2025-11-26
─────────────────────────────

【商品汇总】
上头糕 - 百年好合:  5个
上头糕 - 喜结良缘:  3个
剃头糕 - 花开富贵:  8个
...

─────────────────────────────
【客户明细】

客户: 张三 / 138****5678
预定时间: 2025-11-26
商品:
  - 百年好合 x2 (¥796)
  - 花开富贵 x1 (¥200)
小计: ¥996  ✓已结清

客户: 李四 / 139****1234
预定时间: 2025-11-26
商品:
  - 喜结良缘 x1 (¥398)
小计: ¥398  ⚠未结清

─────────────────────────────
总计订单: 2笔
总金额: ¥1394
已结清: ¥996
未结清: ¥398
═══════════════════════════════
打印时间: 2025-11-26 14:30

```

---

## 三、UI/UX 设计规范

### 3.1 色彩方案

```css
--primary-color: #E74C3C;      /* 主色-中国红 */
--secondary-color: #F39C12;    /* 辅助色-金黄色 */
--success-color: #27AE60;      /* 成功-绿色 */
--background: #FFF5F5;         /* 背景-米白色 */
--text-primary: #2C3E50;       /* 主文字 */
--text-secondary: #7F8C8D;     /* 次文字 */
--border-color: #ECF0F1;       /* 边框 */

```

### 3.2 字体规范

- 标题: 18-24px, 粗体
- 正文: 14-16px, 常规
- 辅助文字: 12-14px, 细体
- 字体族: 'PingFang SC', 'Microsoft YaHei', sans-serif

### 3.3 间距规范

- 页面边距: 24px
- 模块间距: 16px
- 元素间距: 8-12px
- 按钮内边距: 12px 24px

### 3.4 交互效果

- 按钮hover: 颜色加深 10%, 阴影效果
- 输入框focus: 边框高亮, 阴影效果
- 树形菜单展开: 300ms 缓动动画
- 数量调节: 点击反馈动画

---

## 四、数据结构设计

### 4.1 前端订单对象

```jsx
{
  customerInfo: {
    nameOrAddress: String,  // 姓名或地址
    phone: String,          // 联系电话 (必填)
    deliveryDate: Date,     // 预定日期
    notes: String           // 备注
  },
  items: [
    {
      id: String,           // 商品ID
      category: String,     // 分类 (结婚/订婚/生日)
      subCategory: String,  // 子分类 (上头糕/剃头糕等)
      name: String,         // 商品名称
      price: Number,        // 单价
      quantity: Number,     // 数量
      subtotal: Number      // 小计
    }
  ],
  totalAmount: Number,      // 总金额
  isPaid: Boolean,          // 是否结清
  createdAt: Date           // 创建时间
}

```

### 4.2 商品树数据结构

```jsx
[
  {
    label: '花馍',
    children: [
      {
        label: '结婚',
        children: [
          {
            label: '上头糕',
            children: [
              { id: 'hm_jh_stg_bnhh', name: '百年好合', price: 398 },
              { id: 'hm_jh_stg_xjly', name: '喜结良缘', price: 398 },
              // ...
            ]
          }
        ]
      }
    ]
  }
]

```

---

## 五、API 接口设计

### 5.1 提交订单

```
POST /api/orders
Request Body: { OrderObject }
Response: { success: Boolean, orderId: String, message: String }

```

### 5.2 获取指定日期订单

```
GET /api/orders?date=YYYY-MM-DD
Response: { success: Boolean, data: Array<OrderObject> }

```

### 5.3 获取商品列表

```
GET /api/goods
Response: { success: Boolean, data: GoodsTreeArray }

```

---

## 六、响应式设计

### 6.1 断点设置

- Desktop: ≥1200px (左右分栏)
- Tablet: 768px-1199px (上下布局)
- Mobile: <768px (单栏滚动)

### 6.2 移动端适配

- 商品树改为手风琴式展开
- 订单汇总改为底部抽屉
- 按钮全宽显示
- 字号适当放大

---

## 七、性能优化建议

1. **虚拟滚动**: 商品列表较长时使用虚拟滚动
2. **防抖处理**: 数量调节、搜索输入添加防抖
3. **懒加载**: 树形节点按需加载子节点
4. **缓存策略**: 商品列表使用本地缓存
5. **打印优化**: 使用 CSS print media query 优化打印样式

---

## 八、待开发功能 (后期迭代)

1. 订单管理页面 (查询/修改/删除)
2. 客户管理模块
3. 数据统计报表
4. 登录/权限管理
5. 移动端独立应用

---

## 九、开发优先级

**P0 (核心功能):**

- 客户信息录入
- 商品树形选择
- 订单汇总显示
- 提交订单功能

**P1 (重要功能):**

- 打印清单功能
- 数据验证
- 错误提示

**P2 (优化功能):**

- 搜索商品
- 响应式适配
- 动画效果

---

## 十、技术实现提示

### 10.1 推荐组件库

- **Element Plus**: el-tree, el-date-picker, el-input-number
- **图标库**: @element-plus/icons-vue

### 10.2 关键技术点

```jsx
// 树形数据递归展开
const flattenTree = (tree) => { /* ... */ }

// 价格计算
const calculateTotal = computed(() =>
  selectedItems.value.reduce((sum, item) =>
    sum + item.price * item.quantity, 0
  )
)

// 打印功能
window.print() // 配合 @media print CSS

```

### 10.3 表单验证

- 电话号码: /^1[3-9]\d{9}$/
- 必填项: nameOrAddress 或 phone 至少一个
- 商品数量: 最小为1

---

**文档版本**: v1.0

**最后更新**: 2025-11-26

**负责人**: 开发团队